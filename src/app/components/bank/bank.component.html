<div class="bank">

  <div class="balance">
    <h2>Current balance: ${{getBankBalance()}} </h2>
  </div>
  <div class="manage-balance">
    <app-deposit></app-deposit>

    <app-withdraw></app-withdraw>
  </div>
  <div class="date-filtering">
    <mat-accordion>
      <mat-expansion-panel hideToggle>
        <mat-expansion-panel-header>
          Date filtering
        </mat-expansion-panel-header>
        <mat-panel-title>
          Select time period to check transactions
        </mat-panel-title>
        <mat-panel-description>

          <mat-form-field>
            <mat-label>Enter a date range</mat-label>
            <mat-date-range-input [formGroup]="range" [rangePicker]="picker">
              <input formControlName="start" matStartDate placeholder="Start date">
              <input formControlName="end" matEndDate placeholder="End date">
            </mat-date-range-input>
            <mat-datepicker-toggle [for]="picker" matIconSuffix></mat-datepicker-toggle>
            <mat-date-range-picker #picker></mat-date-range-picker>

            <mat-error *ngIf="range.controls.start.hasError('matStartDateInvalid')">Invalid start date</mat-error>
            <mat-error *ngIf="range.controls.end.hasError('matEndDateInvalid')">Invalid end date</mat-error>
          </mat-form-field>

        </mat-panel-description>

        <button (click)="filterByDate()" mat-raised-button> Filter</button>
        <button (click)="clearFilterByDate()" mat-raised-button> Clear filters</button>
      </mat-expansion-panel>
    </mat-accordion>
  </div>
  <div class="history">
    <table (matSortChange)="sortData($event)" [dataSource]="dataSource" mat-table matSort>
      <ng-container matColumnDef="Date">
        <th *matHeaderCellDef mat-header-cell mat-sort-header> Date</th>
        <td *matCellDef="let transaction" mat-cell> {{transaction.date | date:'medium'}} </td>
      </ng-container>

      <ng-container matColumnDef="Type">
        <th *matHeaderCellDef mat-header-cell mat-sort-header> Type</th>
        <td *matCellDef="let transaction" mat-cell> {{transaction.type.toString()}} </td>
      </ng-container>

      <ng-container matColumnDef="Balance">
        <th *matHeaderCellDef mat-header-cell mat-sort-header> Balance</th>
        <td *matCellDef="let transaction" mat-cell> {{transaction.balance}} </td>
      </ng-container>

      <ng-container matColumnDef="Balance Before">
        <th *matHeaderCellDef mat-header-cell mat-sort-header> Balance Before</th>
        <td *matCellDef="let transaction" mat-cell> {{transaction.balanceBefore}} </td>
      </ng-container>

      <ng-container matColumnDef="Balance After">
        <th *matHeaderCellDef mat-header-cell mat-sort-header> Balance After</th>
        <td *matCellDef="let transaction" mat-cell> {{transaction.balanceAfter}} </td>
      </ng-container>

      <tr *matHeaderRowDef="columns" mat-header-row></tr>
      <tr *matRowDef="let row; columns: columns;" mat-row></tr>

    </table>
  </div>
</div>
